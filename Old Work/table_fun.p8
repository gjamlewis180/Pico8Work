pico-8 cartridge // http://www.pico-8.com
version 29
__lua__

#include alarms.lua

function _init()
    face_right=true
    face_left=false
    boo={
        init_x=111,
        init_y=0,
        x=111,
        y=0,
        h=16,
        w=16,
        sprite=1,
        dims=2, -- base dimension of the sprite 
        facing=face_left,
        draw=draw_obj, --function
        move=move_boo, --function
        direction=-1,
        x_step=1,
        y_step=0
    }


    mario={
        init_x=0,
        init_y=16,
        x=0,
        y=16,
        h=16,
        w=16,
        sprite=3,
        dims=2,
        facing=face_left,
        direction=-1,
        draw=draw_obj, --function
        flip=flip_mario --function
    }

    mario_facing_alarm=MakeAlarm(90,mario.flip)
end



function _draw()
    cls()
    boo.draw(boo)
    mario.draw(mario)
end
function _update()
    UpdateAlarms()
    boo.move(boo)
end

function move_boo(boo_obj)
    --print("calling move boo")
    if (boo_obj.facing==face_left) and (mario.facing==face_right ) then
        
    else
        boo_obj.x = boo_obj.x+(boo_obj.x_step * boo_obj.direction)
        if (boo_obj.x <=0) or (boo_obj.x>=boo_obj.init_x) then
            boo_obj.direction*=-1
            if (boo_obj.facing == face_left) then
                boo_obj.facing=face_right
            else
                boo_obj.facing=face_left
            end
        end
    end
end

function draw_obj(obj)
    spr(obj.sprite,obj.x,obj.y,obj.dims,obj.dims,obj.facing)
end

function flip_mario()
    if (mario.facing == face_left) then
        mario.facing=face_right
    else
        mario.facing=face_left
    end
    StartAlarm(mario_facing_alarm, 90)
end

__gfx__
000000000000a0a0a900000000000eeee88820000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000008acab900000000088888888820000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
007007006600aaaaa900000000082ff2888820000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000676667776650066000000f0ff0f442000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0007700067677777776567d000000f0ff0f4f2000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0070070006077007707677500000fffffffff2000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000670077007777d000000044444ff40000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000067107710777d500000000fffffe00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000006777777778757d000000c8fec8820000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000067878787877766d000088c888c882000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000677888882776d50000082acccac82000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000067778ee2776d5000000ffccccccff000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000677e87776d50000000feccccccfe000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000006e87766d50000000000cc00cc00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000e866dd00000000000044004400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000ee800000000000000442002440000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
